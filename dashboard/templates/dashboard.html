{% extends 'base.html' %}
{% load static %}
{% block content %}
{% for transaction in transactions %}
{% if transaction.typ == 'Deposit' %}
<p class="deposit"> {{transaction.amount}}</p>
{% elif transaction.type == 'Withdraw' %}
<p class="withdraw">{{transaction.amount}}</p>
{% endif %}
{% endfor %}
<h1 id="balance">{{profile.balance}}</h1>
<div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');
  const outflow = document.getElementsByClassName('withdraw');
  let outflowData = [];
  let totalOutflow = 0;

  for (let i = 1; i < outflow.length; i++) {
    let amount = Number(outflow[i].innerText);
    outflowData.push(amount);
    totalOutflow += amount;
  }

  const data = {
  labels: [
    'Outflow',
    'Inflow',
  ],
  datasets: [{
    label: 'My First Dataset',
    data: [totalOutflow, {{profile.balance}}],
    backgroundColor: [
      'rgb(255, 0, 0)',
      'rgb(60, 179, 113)'
    ],
    hoverOffset: 4
  }]
};

  new Chart(ctx, {
    type: 'pie',
  data: data,
});

</script>
{% endblock %}